<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta property="wb:webmaster" content="fa38ad6c2e7e6ecc" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
    <link rel="icon" href="//yoo.qpic.cn/yoo_img/0/d046a09e0d038750ce32e2efa49b7936/0">
    <title>测一测你的择偶倾向</title>
</head>

<body>
    <style>
        [v-cloak] {
            display: none;
        }

        body {
            background-color: #bd0298;
        }

        .preload {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 8;

            display: flex;
            height: 100%;
            flex-direction: column;
            align-content: center;
            justify-content: center;

            background-repeat: no-repeat;
            background-image: url(//yoo.qpic.cn/yoo_img/0/ac3e61f9b79ea14908fec850653b2097/0);
            background-position: center;
            background-size: 100% 100%;

        }

        .prelogo {
            position: absolute;
            width: 100%;
            left: 0;
            bottom: 1.3333333333vw;
            text-align: center;

        }

        .prelogo>img {
            width: 21.8666666667vw;
        }

        .process {
            width: 40.4vw;
            height: 5.3333333333vw;
            margin: 0 auto;
            background-image: url(//yoo.qpic.cn/yoo_img/0/b71ddd665283c9fbaf4142da2e92302c/0);
            background-repeat: no-repeat;
            background-size: contain;
            border-radius: 17px;
            overflow: hidden;
        }

        .line {
            width: 0%;
            background-image: url(http://yoo.qpic.cn/yoo_img/0/e4eb9414cf315c2c2f7d96ffd38ef6fe/0);
            background-repeat: repeat no-repeat;
            background-position: center;
            height: 5.3333333333vw;
        }

        .pretxt {
            text-align: center;
            color: #fff;
            font-size: 3.4vw;
            margin-top: 4vw;
        }
    </style>
    <div id="preload" class="preload">
        <div class="process">
            <div class="line" id="line"></div>
        </div>
        <div class="pretxt">加载中...</div>
        <div class="prelogo">
            <img src="//yoo.qpic.cn/yoo_img/0/587cb9b5eaef42cb2144084b2c01cf8b/0" alt="欢遇logo">
        </div>
    </div>
    <noscript>
        <strong>We're sorry but project-nb doesn't work properly without JavaScript enabled. Please enable it to
            continue.</strong>
    </noscript>
    <div id="app" v-cloak></div>
    <script>
        !(function () {
            let line = document.querySelector("#line");
            let preload = document.querySelector("#preload");
            let temp_Arr = [
                "//yoo.qpic.cn/yoo_img/0/9ea3bc8a06caf180659cf222b0f7904e/0",
                "//yoo.qpic.cn/yoo_img/0/1a8057b72fd3b3353c8beeb44ad8ec05/0",
                "//yoo.qpic.cn/yoo_img/0/9eaf17e96e7baae3d267123e3012c5a4/0",
                "//yoo.qpic.cn/yoo_img/0/107d8e774cb64aa489a7bb5fd4a53d6b/0",
                "//yoo.qpic.cn/yoo_img/0/aac53124453f9fded50b2004e4b2903d/0",
                "//yoo.qpic.cn/yoo_img/0/aac53124453f9fded50b2004e4b2903d/0",
                "//yoo.qpic.cn/yoo_img/0/f7a17066469aef3aa88e5b51c6099284/0",
                "//yoo.qpic.cn/yoo_img/0/f77ff6f173cec91adf4f9e1f450b7fa1/0",
                "//yoo.qpic.cn/yoo_img/0/ee2afffbed072b4f478f112e142cef13/0",
                "//yoo.qpic.cn/yoo_img/0/45d25652112c67eaa8a9e988721ffb6d/0",
                "//yoo.qpic.cn/yoo_img/0/19c1ebc05d44e8fa5841b711795a9eb2/0",
                "//yoo.qpic.cn/yoo_img/0/62456866ee493280e495381468410c5a/0"
            ];
            var n = 0, sum = temp_Arr.length;
            temp_Arr.forEach((item) => {
                var img = new Image()
                img.src = item;
                img.onload = function () {
                    run();
                }
            });
            function run() {
                n += 1;
                line.style.width = (n / sum) * 100 + "%";
                if (n == sum) {
                    preload.style.display = "none";
                }
            }
        })();
    </script>
    <script src="//mvp-web-1300522992.file.myqcloud.com/js/mvpapp.min.js"></script>
    <script src="//mvp-web-1300522992.file.myqcloud.com/js/qqapi.min.js"></script>
    <script src="https://pingjs.qq.com/h5/stats.js?v2.0.4" name="MTAH5" sid="500709813" cid="500709816"></script>
    <!-- built files will be auto injected -->
    <script type="text/javascript">
        // 初始化分享默认参数
        window.share_url = location.href;
        window.image_url = "https://yoo.qpic.cn/yoo_img/0/7d8d0e199dff7b464c2e5f7c6205bfa5/0";
        window.sourceName = "欢遇APP";
        window.title = document.title;
        window.desc = "测一测你的择偶倾向";
        window.src_iconUrl == "https://yoo.qpic.cn/yoo_img/0/7d8d0e199dff7b464c2e5f7c6205bfa5/0";
    </script>

    <script type="text/javascript">
      setTimeout(()=>{
        mvpshare();
        _share();
      },2000)
    function _share() {
  if (mqq.device.isMobileQQ()) {

    setTimeout(function() {
      mqq.ui.setOnShareHandler(function(type) {
        mqq.ui.shareMessage(
          {
            title: title,
            desc: desc,
            share_type: type,
            back: true,
            image_url: image_url,
            imageUrl: image_url,
            share_url: share_url,
            sourceName: sourceName,
            puin: 0,
            src_iconUrl: src_iconUrl
          },
          function(res) {
            if (res.retCode === 0) {
              // mqq.ui.popBack();
            }
          }
        );
        MtaH5.clickStat("global_share", {
          uuid: m_getCookie("UUID")
        });
      });
    }, 200);
  } else {
    let wechat_url = share_url + '&adtag=wechatshare';
    let onBridgeReady = function() {
      // 转发朋友圈
      WeixinJSBridge.on('menu:share:timeline', function(e) {
        let data = {
          img_url: image_url,
          img_width: '120',
          img_height: '120',
          link: wechat_url,
          // desc这个属性要加上，虽然不会显示，但是不加暂时会导致无法转发至朋友圈，
          desc: desc,
          title: title
        };
        WeixinJSBridge.invoke('shareTimeline', data, function(res) {
          WeixinJSBridge.log(res.err_msg);
        });
        MtaH5.clickStat("global_share", {
          uuid: m_getCookie("UUID")
        });
      });
      // 同步到微博
      WeixinJSBridge.on('menu:share:weibo', function() {
        WeixinJSBridge.invoke(
          'shareWeibo',
          {
            content: title,
            url: wechat_url
          },
          function(res) {
            WeixinJSBridge.log(res.err_msg);
          }
        );
        MtaH5.clickStat("global_share", {
          uuid: m_getCookie("UUID")
        });
      });
      // 分享给朋友
      WeixinJSBridge.on('menu:share:appmessage', function(argv) {
        WeixinJSBridge.invoke(
          'sendAppMessage',
          {
            img_url: image_url,
            img_width: '120',
            img_height: '120',
            link: wechat_url,
            desc: desc,
            title: title
          },
          function(res) {
            WeixinJSBridge.log(res.err_msg);
          }
        );
        MtaH5.clickStat("global_share", {
          uuid: m_getCookie("UUID")
        });
      });
    };
    if (
      typeof top.window.WeixinJSBridge === 'undefined' ||
      !top.window.WeixinJSBridge.invoke
    ) {
      // 没有就监听ready事件
      if (document.addEventListener) {
        document.addEventListener(
          'WeixinJSBridgeReady',
          onBridgeReady,
          false
        );
      } else if (document.attachEvent) {
        document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
        document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
      }
    } else {
      // 初始化结束直接就执行吧！
      onBridgeReady();
    }
  }
}

    function mvpshare() {
      /*
       *channel
       * 分享渠道（可以组合 1-茄子好友 2-微信 4-QQ 8-朋友圈 16-QQ空间）
       * title
       * 分享标题
       * summary
       * 分享概述
       * panelTitle分享面板标题
       * url
       * 分享链接
       * imgUrl
       * 分享缩略图
       */
      mvpApp.bridge.callHandler(
        {
          module: "QZCommon",
          method: "share",
          query: {
            url: window.share_url,
            title: window.title,
            summary: "2020新年快乐",
            panelTitle: "发送邀请到",
            channel: "4",
            imgUrl: window.image_url
          }
        },
        data => {
          MtaH5.clickStat("global_share", {
            uuid: this.m_getCookie("UUID")
          });
          console.log(data);
        },
        err => {
          console.log("err", err);
        }
      );
    }
    function m_getCookie(sKey) {
      return (
        decodeURIComponent(
          document.cookie.replace(
            new RegExp(
              "(?:(?:^|.*;)\\s*" +
                encodeURIComponent(sKey).replace(/[-.+*]/g, "\\$&") +
                "\\s*\\=\\s*([^;]*).*$)|^.*$"
            ),
            "$1"
          )
        ) || null
      );
    }
    </script>
    <script>
        /**
         * MTA初始化
         */
        var _mtac = {
            "performanceMonitor": 1,
            "senseQuery": 1
        };
        // (function () {
        //     var mta = document.createElement("script");
        //     mta.src = "https://pingjs.qq.com/h5/stats.js?v2.0.4";
        //     mta.setAttribute("name", "MTAH5");
        //     mta.setAttribute("sid", "500709813");
        //     mta.setAttribute("cid", "500709816");
        //     var s = document.getElementsByTagName("script")[0];
        //     s.parentNode.insertBefore(mta, s);
        // })();
    </script>

</body>

</html>
